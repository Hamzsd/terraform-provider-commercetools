---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "commercetools_subscription Resource - terraform-provider-commercetools"
subcategory: ""
description: |-
  Subscriptions allow you to be notified of new messages or changes via a Message Queue of your choice. Subscriptions are used to trigger an asynchronous background process in response to an event on the commercetools platform. Common use cases include sending an Order Confirmation Email, charging a Credit Card after the delivery has been made, or synchronizing customer accounts to a Customer Relationship Management (CRM) system.
  See also the Subscriptions API Documentation https://docs.commercetools.com/api/projects/subscriptions
---

# commercetools_subscription (Resource)

Subscriptions allow you to be notified of new messages or changes via a Message Queue of your choice. Subscriptions are used to trigger an asynchronous background process in response to an event on the commercetools platform. Common use cases include sending an Order Confirmation Email, charging a Credit Card after the delivery has been made, or synchronizing customer accounts to a Customer Relationship Management (CRM) system.

See also the [Subscriptions API Documentation](https://docs.commercetools.com/api/projects/subscriptions)

## Example Usage

```terraform
resource "commercetools_subscription" "my-sqs-subscription" {
  key = "my-subscription"

  destination = {
    type          = "SQS"
    queue_url     = "${aws_sqs_queue.your-queue.id}"
    access_key    = "${aws_iam_access_key.ct.id}"
    access_secret = "${aws_iam_access_key.ct.secret}"
    region        = "eu-west-1"
  }

  changes {
    resource_type_ids = ["product"]
  }

  message {
    resource_type_id = "product"
    types            = ["ProductPublished", "ProductCreated"]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- **changes** (Block List) The change notifications subscribed to (see [below for nested schema](#nestedblock--changes))
- **destination** (Map of String) The Message Queue into which the notifications are to be sentSee also the [Destination API Docs](https://docs.commercetools.com/api/projects/subscriptions#destination)
- **format** (Map of String) The [format](https://docs.commercetools.com/api/projects/subscriptions#format) in which the payload is delivered
- **id** (String) The ID of this resource.
- **key** (String) User-specific unique identifier for the subscription
- **message** (Block List) The messages subscribed to (see [below for nested schema](#nestedblock--message))

### Read-Only

- **version** (Number)

<a id="nestedblock--changes"></a>
### Nested Schema for `changes`

Optional:

- **resource_type_ids** (List of String) [Resource Type ID](https://docs.commercetools.com/api/projects/subscriptions#changesubscription)


<a id="nestedblock--message"></a>
### Nested Schema for `message`

Optional:

- **resource_type_id** (String) [Resource Type ID](https://docs.commercetools.com/api/projects/subscriptions#changesubscription)
- **types** (List of String) types must contain valid message types for this resource, for example for resource type product the message type ProductPublished is valid. If no types of messages are given, the subscription is valid for all messages of this resource


### Nested Schema for `destination`

A destination contains all info necessary for the commercetools platform to
deliver a message onto your Message Queue. Message Queues can be
differentiated by the type field.

#### AWS SQS Destination

* `type` - `"SQS"`
* `queue_url` - The url of the queue.
* `access_key` - The aws access key.
* `access_secret` - The aws access secret.
* `region` - The aws region.

#### AWS SNS Destination

* `type` - `"SNS"`
* `topic_arn` - The arn of the topic.
* `access_key` - The aws access key.
* `access_secret` - The aws access secret.

#### AWS EventBridge Destination

* `type` - `"EventBridge"`
* `region` - The aws region.
* `account_id` - ID of the AWS account that will receive events from commercetools.

#### Azure Service Bus Destination

* `type` - `"azure_servicebus"`
* `connection_string` - The SharedAccessKey for the service bus destination.

#### Azure Event Grid Destination

* `type` - `"azure_eventgrid"`
* `uri` - The URI of the topic.
* `access_key` - The access key for the destination.

#### Google Cloud Pub/Sub Destination

* `type` - `"google_pubsub"`
* `project_id` - The id of the project that contains the Pub/Sub topic.
* `topic` - The name of the Pub/Sub topic.


